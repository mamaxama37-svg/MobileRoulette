<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Professional Roulette Analyzer (Last 100)</title>
<style>
body { background:#000; color:#fff; font-family:Arial; margin:0; text-align:center; }
header { background:#111; padding:12px; font-size:1.3em; }
#box { background:#1a1a1a; margin:10px; padding:10px; border-radius:6px; }
button { padding:8px 12px; margin:6px; font-size:1em; }
textarea { width:90%; height:120px; margin:4px; padding:6px; font-size:1em; }
#heatmap span {
  display:inline-block; width:28px; margin:2px; padding:4px;
  border-radius:4px; font-size:0.9em;
}
.hot { background:#b00; }
.warm { background:#665500; }
.cold { background:#222; }
</style>
</head>
<body>

<header>Smart Professional Roulette Analyzer (Last 100 Numbers)</header>

<!-- PASTE NUMBERS -->
<div id="box">
<b>Paste Last 100 Numbers</b><br>
<textarea id="numbersInput" placeholder="0,32,15,..."></textarea><br>
<button onclick="analyzeNumbers()">Analyze</button>
</div>

<!-- OUTPUT -->
<div id="box">
<div id="status">Waiting for data…</div>
<div id="macroSector"></div>
<div id="momentumSector"></div>
<div id="topNumbers"></div>
<div id="neighbors"></div>
<div id="prediction"></div>
<div id="stake"></div>
<div id="risk"></div>
</div>

<!-- HEATMAP -->
<div id="box">
<b>Wheel Heatmap</b>
<div id="heatmap"></div>
</div>

<script>
const wheel = [0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];

let history100 = [];
let macroSector = [];
let last14Sector = [];
let lastHeat = [];

/* ===== ANALYZE LAST 100 NUMBERS ===== */
function analyzeNumbers(){
  const raw = document.getElementById("numbersInput").value;
  if(!raw) return alert("Paste your numbers first");

  let nums = raw.match(/\b([0-9]|[1-2][0-9]|3[0-6])\b/g).map(Number);
  if(!nums || nums.length<100) return alert("Paste at least 100 numbers");

  history100 = nums.slice(-100);
  document.getElementById("status").innerText = "Analyzing last 100 numbers…";

  // Automatically detect last 14 numbers
  last14Sector = history100.slice(-14);
  document.getElementById("momentumSector").innerHTML = "<b>Auto Last-14 Numbers:</b> " + last14Sector.join(", ");

  runMacroEngine(history100);
}

/* ===== MACRO SECTOR ===== */
function runMacroEngine(history){
  const heat = Array(37).fill(0);
  history.forEach(n=>{
    const idx = wheel.indexOf(n);
    for(let i=-2;i<=2;i++) heat[(idx+i+37)%37]++;
  });

  lastHeat = heat;

  // Best 10-number macro sector
  let best={sum:0,start:0};
  for(let i=0;i<37;i++){
    let s=0;
    for(let j=0;j<10;j++) s+=heat[(i+j)%37];
    if(s>best.sum) best={sum:s,start:i};
  }

  macroSector=[];
  for(let i=0;i<10;i++) macroSector.push(wheel[(best.start+i)%37]);

  document.getElementById("macroSector").innerHTML = "<b>Macro Sector:</b> " + macroSector.join(", ");

  drawHeatmap(heat);
  updateSmartPrediction();
}

/* ===== SMART PREDICTION (Numbers + Neighbors) ===== */
function updateSmartPrediction(){
  if(history100.length===0) return;

  // Frequency analysis
  const freq = {};
  history100.forEach(n=>freq[n]=(freq[n]||0)+1);

  // Top numbers based on frequency + last14 momentum weighting
  const scores = {};
  for(let n=0;n<=36;n++){
    let score = freq[n] || 0;
    if(last14Sector.includes(n)) score += 2; // boost momentum
    scores[n] = score;
  }

  const sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
  const topNumbers = sorted.slice(0,5).map(x=>Number(x[0]));

  // Neighbors of top numbers
  const neighbors = [];
  topNumbers.forEach(n=>{
    const idx = wheel.indexOf(n);
    neighbors.push(wheel[(idx-1+37)%37]);
    neighbors.push(wheel[(idx+1)%37]);
  });

  // Final sector merge
  let finalSector = macroSector.slice();
  const overlap = macroSector.filter(n=>last14Sector.includes(n));
  if(overlap.length>=5) finalSector = overlap;
  else finalSector = [...new Set([...last14Sector,...macroSector])].slice(0,10);

  // Display outputs
  document.getElementById("topNumbers").innerHTML = "<b>Top Predicted Numbers:</b> "+topNumbers.join(", ");
  document.getElementById("neighbors").innerHTML = "<b>Neighbors:</b> "+neighbors.join(", ");
  document.getElementById("prediction").innerHTML = "<b>Final Sector Prediction:</b> "+finalSector.join(", ");

  // Stake & Risk
  const bankroll=100;
  const strength=finalSector.length<=6 ? 0.06 : 0.03;
  const stake=Math.max(1,Math.floor(bankroll*strength));
  document.getElementById("stake").innerHTML = "Suggested Flat Stake: <b>"+stake+" units</b>";

  const decay = finalSector.filter(n=>last14Sector.includes(n)).length<3;
  document.getElementById("risk").innerHTML = decay ? "⚠️ Weak confirmation – reduce/skip" : "✅ Sector confirmed – playable";
}

/* ===== HEATMAP ===== */
function drawHeatmap(heat){
  const el=document.getElementById("heatmap");
  el.innerHTML="";
  const max=Math.max(...heat);
  heat.forEach((h,i)=>{
    const s=document.createElement("span");
    s.innerText=wheel[i];
    if(h>max*0.7) s.className="hot";
    else if(h>max*0.4) s.className="warm";
    else s.className="cold";
    el.appendChild(s);
  });
}
</script>
</body>
</html>
