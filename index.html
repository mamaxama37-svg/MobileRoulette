<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Roulette Smart Analyzer</title>

<style>
body { background:#000; color:#fff; font-family:Arial, sans-serif; margin:0; text-align:center; }
header { background:#111; padding:12px; font-size:1.2em; }
#box { background:#1a1a1a; margin:10px; padding:10px; border-radius:6px; }
textarea { width:95%; height:120px; background:#000; color:#0f0; }
button { padding:10px 14px; font-size:1em; margin:8px; }
.result { font-size:1.05em; margin-top:6px; }
.hot { color:#ff5555; font-weight:bold; }
.good { color:#ffaa00; }
.ok { color:#66ccff; }
</style>
</head>

<body>

<header>Professional Roulette Smart Analyzer</header>

<div id="box">
<b>1Ô∏è‚É£ Paste LAST 100 Numbers (comma or space separated)</b><br>
<textarea id="numbers"></textarea><br>
<button onclick="analyze()">ANALYZE</button>
</div>

<div id="box">
<button onclick="exportHistory()">üíæ Export History</button>
<button onclick="importHistory()">üìÇ Import History</button>
<input type="file" id="importFile" style="display:none" onchange="loadFile(event)">
</div>

<div id="box">
<div class="result" id="anchors"></div>
<div class="result" id="neighbors"></div>
<div class="result" id="probabilities"></div>
<div class="result" id="confidence"></div>
</div>

<script>
const wheel=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,
30,8,23,10,5,24,16,33,1,20,14,31,9,
22,18,29,7,28,12,35,3,26];

let sessionHistory = [];

function analyze(){
  const input = document.getElementById("numbers").value;
  let nums = input.match(/\b([0-9]|[1-2][0-9]|3[0-6])\b/g);
  if(!nums || nums.length < 30){
    alert("Paste at least 30 numbers (ideally 100)");
    return;
  }
  nums = nums.map(Number).slice(-100);

  // ===== SESSION MEMORY DECAY =====
  sessionHistory = sessionHistory.concat(nums);
  if(sessionHistory.length>200) sessionHistory = sessionHistory.slice(-200);
  const history = sessionHistory.slice(-100);

  // ===== HEAT MAP WITH NEIGHBOR INFLUENCE =====
  let heat = Array(37).fill(0);
  history.forEach((n,idx)=>{
    const idxWheel = wheel.indexOf(n);
    for(let i=-2;i<=2;i++){
      const w = Math.abs(i)===0 ? 3 : Math.abs(i)===1 ? 2 : 1;
      // older spins decay
      const decay = Math.pow(0.97, history.length-idx);
      heat[(idxWheel+i+37)%37] += w*decay;
    }
  });

  // ===== TOP 3 ULTRA-AGGRESSIVE ANCHORS =====
  let anchors = [...heat]
    .map((v,i)=>({num:wheel[i],score:v}))
    .sort((a,b)=>b.score-a.score)
    .slice(0,3);

  document.getElementById("anchors").innerHTML =
    "<b>üéØ Top 3 Anchor Numbers:</b><br>" +
    anchors.map(a=>a.num+" ("+a.score.toFixed(1)+")").join(", ");

  // ===== 5-NEIGHBOR SET =====
  let neighborSet = new Map();
  anchors.forEach(a=>{
    const idx = wheel.indexOf(a.num);
    for(let i=-2;i<=2;i++){
      const n = wheel[(idx+i+37)%37];
      const w = Math.abs(i)===0 ? 1.0 : Math.abs(i)===1 ? 0.7 : 0.4;
      neighborSet.set(n, (neighborSet.get(n)||0) + w*a.score);
    }
  });

  let neighbors = [...neighborSet.entries()]
    .sort((a,b)=>b[1]-a[1])
    .slice(0,5);

  document.getElementById("neighbors").innerHTML =
    "<b>üéØ FINAL 5-NUMBER BET:</b><br>" +
    neighbors.map(n=>"<span class='hot'>"+n[0]+"</span>").join(", ");

  // ===== PROBABILITIES =====
  const total = neighbors.reduce((s,n)=>s+n[1],0);
  document.getElementById("probabilities").innerHTML =
    "<b>üìä Probabilities:</b><br>" +
    neighbors.map(n=>{
      const p = ((n[1]/total)*100).toFixed(1);
      return n[0]+": "+p+"%";
    }).join("<br>");

  // ===== CONFIDENCE FILTER =====
  const strong = neighbors.filter(n=>n[1]>0.4*Math.max(...neighbors.map(x=>x[1])));
  document.getElementById("confidence").innerHTML =
    strong.length>=3
      ? "‚úÖ Strong Confidence ‚Äì Play"
      : "‚ö†Ô∏è Weak Confidence ‚Äì Skip / Reduce Bet";
}

/* ===== EXPORT / IMPORT ===== */
function exportHistory(){
  const blob = new Blob([sessionHistory.join(",")], {type:"text/plain"});
  const url = URL.createObjectURL(blob);
  const a=document.createElement("a");
  a.href=url; a.download="roulette_history.txt"; a.click();
}

function importHistory(){
  document.getElementById("importFile").click();
}

function loadFile(event){
  const file=event.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = e=>{
    const text=e.target.result;
    const nums=text.match(/\b([0-9]|[1-2][0-9]|3[0-6])\b/g);
    if(nums) sessionHistory=nums.map(Number);
    alert("History loaded: "+sessionHistory.length+" numbers");
  }
  reader.readAsText(file);
}
</script>

</body>
</html>
